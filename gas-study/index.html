<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Gas Cost Study - FlashBank</title><meta name="description" content="Real-world gas cost analysis of multi-provider flash loans on FlashBank"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/94ebd2aea39cdd88.css" as="style"/><link rel="stylesheet" href="/_next/static/css/94ebd2aea39cdd88.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-d3fadd49662a4572.js" defer=""></script><script src="/_next/static/chunks/framework-945b357d4a851f4b.js" defer=""></script><script src="/_next/static/chunks/main-00f9ddc8cb2b4613.js" defer=""></script><script src="/_next/static/chunks/pages/_app-dab5a6636e7a538b.js" defer=""></script><script src="/_next/static/chunks/pages/gas-study-d37dc04f4e840093.js" defer=""></script><script src="/_next/static/4mw4L_P0hGxsGAZ4xmqQq/_buildManifest.js" defer=""></script><script src="/_next/static/4mw4L_P0hGxsGAZ4xmqQq/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-gray-50"><header class="bg-white border-b border-gray-200 shadow-sm"><div class="container mx-auto px-6 py-6"><div class="flex items-center gap-3 mb-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 text-blue-600"><path d="M3 3v18h18"></path><path d="M18 17V9"></path><path d="M13 17V5"></path><path d="M8 17v-3"></path></svg><h1 class="text-3xl font-bold text-gray-900">Gas Cost Study</h1></div><p class="text-gray-600">Multi-Provider Flash Loan Gas Analysis</p></div></header><main class="container mx-auto px-6 py-8 max-w-5xl"><div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-8"><div class="flex items-start gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-green-600 flex-shrink-0 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg><div><h2 class="text-lg font-semibold text-green-900 mb-2">First Real-World Test: Success! ‚úÖ</h2><p class="text-green-800 mb-3">On Nov 25, 2025, we executed the first multi-provider flash loan on Sepolia testnet:</p><div class="bg-white rounded-lg p-4 font-mono text-sm"><p class="text-gray-700 mb-2"><strong>Transaction:</strong> <a href="https://sepolia.etherscan.io/tx/0xbe11b344027b38df7a85ad022e43d0aa2b775bd31890f722143944027db5d723" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline break-all">0xbe11b344027b38df7a85ad022e43d0aa2b775bd31890f722143944027db5d723</a></p><p class="text-gray-700"><strong>Result:</strong> 0.08 ETH borrowed from 2 providers, fees distributed proportionally</p></div></div></div></div><section class="bg-white rounded-xl shadow p-8 mb-8 border border-gray-200"><h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-blue-600"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>How It Worked</h2><div class="space-y-4"><div class="bg-gray-50 rounded-lg p-4"><h3 class="font-semibold text-gray-900 mb-2">Provider 1 (0x3CD6...c191)</h3><ul class="text-sm text-gray-700 space-y-1"><li>‚Ä¢ Contributed: <strong>0.05110553 WETH</strong></li><li>‚Ä¢ Received back: <strong>0.05111575 WETH</strong></li><li>‚Ä¢ Profit: <strong>0.00001022 WETH</strong> (0.02% of their share)</li></ul></div><div class="bg-gray-50 rounded-lg p-4"><h3 class="font-semibold text-gray-900 mb-2">Provider 2 (0x5CAF...0fd3)</h3><ul class="text-sm text-gray-700 space-y-1"><li>‚Ä¢ Contributed: <strong>0.02889447 WETH</strong></li><li>‚Ä¢ Received back: <strong>0.02890025 WETH</strong></li><li>‚Ä¢ Profit: <strong>0.00000578 WETH</strong> (0.02% of their share)</li></ul></div><div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><p class="text-sm text-blue-900"><strong>‚úì Key Success:</strong> Fees were distributed proportionally to each provider&#x27;s contribution, exactly as designed. The router pulled from multiple wallets, unwrapped to ETH for the borrower, then wrapped the repayment and distributed it back with fees.</p></div></div></section><section class="bg-white rounded-xl shadow p-8 mb-8 border border-gray-200"><h2 class="text-2xl font-bold text-gray-900 mb-6">‚õΩ Gas Cost Breakdown</h2><div class="mb-6"><h3 class="text-lg font-semibold text-gray-900 mb-3">Operations in This Transaction</h3><div class="overflow-x-auto"><table class="w-full text-sm"><thead class="bg-gray-100"><tr><th class="px-4 py-2 text-left">Operation</th><th class="px-4 py-2 text-right">Est. Gas</th><th class="px-4 py-2 text-left">Notes</th></tr></thead><tbody class="divide-y divide-gray-200"><tr><td class="px-4 py-3">2√ó WETH <code>transferFrom</code> (providers ‚Üí router)</td><td class="px-4 py-3 text-right font-mono">~100k</td><td class="px-4 py-3 text-gray-600">50k each</td></tr><tr><td class="px-4 py-3">1√ó WETH unwrap (WETH ‚Üí ETH)</td><td class="px-4 py-3 text-right font-mono">~25k</td><td class="px-4 py-3 text-gray-600">toNative=true</td></tr><tr><td class="px-4 py-3">Demo execution (counter + proof)</td><td class="px-4 py-3 text-right font-mono">~70k</td><td class="px-4 py-3 text-gray-600">Not typical</td></tr><tr><td class="px-4 py-3">1√ó WETH wrap (repayment ETH ‚Üí WETH)</td><td class="px-4 py-3 text-right font-mono">~30k</td><td class="px-4 py-3 text-gray-600">toNative=true</td></tr><tr><td class="px-4 py-3">2√ó WETH <code>transfer</code> (router ‚Üí providers)</td><td class="px-4 py-3 text-right font-mono">~90k</td><td class="px-4 py-3 text-gray-600">45k each with fees</td></tr><tr><td class="px-4 py-3">Router overhead &amp; verification</td><td class="px-4 py-3 text-right font-mono">~30k</td><td class="px-4 py-3 text-gray-600">Flash loan logic</td></tr><tr class="bg-yellow-50 font-semibold"><td class="px-4 py-3">Total (this demo tx)</td><td class="px-4 py-3 text-right font-mono">~345k</td><td class="px-4 py-3 text-gray-600">Including demo overhead</td></tr><tr class="bg-blue-50 font-semibold"><td class="px-4 py-3">Real flash loan (no demo)</td><td class="px-4 py-3 text-right font-mono">~275k</td><td class="px-4 py-3 text-gray-600">2 providers, toNative</td></tr></tbody></table></div></div><div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"><h4 class="font-semibold text-blue-900 mb-2">üí° WETH-Only Optimization</h4><p class="text-sm text-blue-800 mb-2">If the borrower accepts <strong>WETH directly</strong> (toNative=false), you save ~55k gas by skipping unwrap/wrap:</p><ul class="text-sm text-blue-800 space-y-1 ml-4"><li>‚Ä¢ <strong>WETH-only, 2 providers:</strong> ~220k gas</li><li>‚Ä¢ <strong>WETH-only, 1 provider:</strong> ~120k gas</li><li>‚Ä¢ <strong>Recommendation:</strong> Smaller loans should use WETH to minimize gas overhead</li></ul></div><h3 class="text-lg font-semibold text-gray-900 mb-3">Scaling: Gas vs Number of Providers</h3><div class="overflow-x-auto mb-6"><table class="w-full text-sm"><thead class="bg-gray-100"><tr><th class="px-4 py-2 text-left">Providers</th><th class="px-4 py-2 text-right">Gas (toNative)</th><th class="px-4 py-2 text-right">Gas (WETH-only)</th><th class="px-4 py-2 text-left">Notes</th></tr></thead><tbody class="divide-y divide-gray-200"><tr><td class="px-4 py-3">1</td><td class="px-4 py-3 text-right font-mono">~175k</td><td class="px-4 py-3 text-right font-mono text-green-600">~120k</td><td class="px-4 py-3 text-gray-600">Comparable to Aave</td></tr><tr><td class="px-4 py-3">2</td><td class="px-4 py-3 text-right font-mono">~275k</td><td class="px-4 py-3 text-right font-mono text-green-600">~220k</td><td class="px-4 py-3 text-gray-600">+100k per provider</td></tr><tr><td class="px-4 py-3">3</td><td class="px-4 py-3 text-right font-mono">~375k</td><td class="px-4 py-3 text-right font-mono">~320k</td><td class="px-4 py-3 text-gray-600">+100k per provider</td></tr><tr><td class="px-4 py-3">5</td><td class="px-4 py-3 text-right font-mono">~575k</td><td class="px-4 py-3 text-right font-mono">~520k</td><td class="px-4 py-3 text-gray-600">High fragmentation</td></tr></tbody></table></div><div class="bg-gray-50 rounded-lg p-4"><p class="text-sm text-gray-700"><strong>Formula:</strong> Gas ‚âà 175k + 100k √ó (N-1) for toNative, or 120k + 100k √ó (N-1) for WETH-only, where N = number of providers.</p></div></section><section class="bg-white rounded-xl shadow p-8 mb-8 border border-gray-200"><h2 class="text-2xl font-bold text-gray-900 mb-6">üí∞ Cost Comparison (Mainnet)</h2><p class="text-sm text-gray-600 mb-4">Assuming: Gas price = 20 gwei, ETH = $3,500</p><div class="overflow-x-auto"><table class="w-full text-sm"><thead class="bg-gray-100"><tr><th class="px-4 py-2 text-left">Scenario</th><th class="px-4 py-2 text-right">Gas</th><th class="px-4 py-2 text-right">Cost (USD)</th><th class="px-4 py-2 text-left">Best For</th></tr></thead><tbody class="divide-y divide-gray-200"><tr class="bg-green-50"><td class="px-4 py-3"><strong>Aave V3 Flash Loan</strong></td><td class="px-4 py-3 text-right font-mono">150-200k</td><td class="px-4 py-3 text-right font-mono">$10.50-$14</td><td class="px-4 py-3 text-gray-600">Single source</td></tr><tr><td class="px-4 py-3"><strong>FlashBank (1 provider, WETH)</strong></td><td class="px-4 py-3 text-right font-mono">~120k</td><td class="px-4 py-3 text-right font-mono text-green-600">$8.40</td><td class="px-4 py-3 text-gray-600">Small WETH loans</td></tr><tr><td class="px-4 py-3"><strong>FlashBank (1 provider, toNative)</strong></td><td class="px-4 py-3 text-right font-mono">~175k</td><td class="px-4 py-3 text-right font-mono">$12.25</td><td class="px-4 py-3 text-gray-600">Small ETH loans</td></tr><tr><td class="px-4 py-3"><strong>FlashBank (2 providers, WETH)</strong></td><td class="px-4 py-3 text-right font-mono">~220k</td><td class="px-4 py-3 text-right font-mono">$15.40</td><td class="px-4 py-3 text-gray-600">Medium WETH loans</td></tr><tr><td class="px-4 py-3"><strong>FlashBank (2 providers, toNative)</strong></td><td class="px-4 py-3 text-right font-mono">~275k</td><td class="px-4 py-3 text-right font-mono">$19.25</td><td class="px-4 py-3 text-gray-600">Medium ETH loans</td></tr><tr><td class="px-4 py-3"><strong>FlashBank (5 providers, toNative)</strong></td><td class="px-4 py-3 text-right font-mono">~575k</td><td class="px-4 py-3 text-right font-mono text-orange-600">$40.25</td><td class="px-4 py-3 text-gray-600">Large/fragmented loans</td></tr></tbody></table></div><div class="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-start gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></svg><div class="text-sm text-yellow-900"><p class="font-semibold mb-2">When Does Multi-Provider Cost Matter?</p><p class="mb-2">FlashBank has a <strong>0.03% fee advantage</strong> over Aave (0.02% vs 0.05%). The extra gas from multiple providers becomes prohibitive when:</p><ul class="ml-4 space-y-1"><li>‚Ä¢ Small loans (&lt;$10k) from many providers</li><li>‚Ä¢ The gas overhead exceeds the fee savings</li><li>‚Ä¢ High-frequency small arbitrage with tight margins</li></ul></div></div></div></section><section class="bg-white rounded-xl shadow p-8 mb-8 border border-gray-200"><h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-green-600"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg>Optimizations &amp; Strategies</h2><div class="space-y-6"><div class="border-l-4 border-blue-500 pl-4"><h3 class="font-semibold text-gray-900 mb-2">1. Single-Provider Fast Path (Upcoming)</h3><p class="text-sm text-gray-700 mb-2">If the loan amount is under a threshold (e.g., 10 ETH) and can be fulfilled by a single provider, the router will automatically select that provider to minimize gas costs.</p><p class="text-sm text-gray-600 italic">This optimization encourages small providers while keeping gas efficient for small loans.</p></div><div class="border-l-4 border-green-500 pl-4"><h3 class="font-semibold text-gray-900 mb-2">2. WETH-Only Mode</h3><p class="text-sm text-gray-700 mb-2">For borrowers who can work with WETH directly (most MEV/arb bots), set <code class="bg-gray-100 px-1 rounded">toNative=false</code>to save ~55k gas by skipping unwrap/wrap operations.</p><div class="bg-green-50 rounded p-3 text-xs font-mono mt-2">router.flashLoan(wethAddress, amount, <span class="text-green-600 font-bold">false</span>, data);</div></div><div class="border-l-4 border-purple-500 pl-4"><h3 class="font-semibold text-gray-900 mb-2">3. Provider Incentives</h3><p class="text-sm text-gray-700">We want to encourage <em>anyone</em> to provide liquidity, so we won&#x27;t implement aggressive provider minimization. However, borrowers benefit from having a few large providers rather than many small ones.</p></div><div class="border-l-4 border-orange-500 pl-4"><h3 class="font-semibold text-gray-900 mb-2">4. Fee vs Gas Trade-off</h3><p class="text-sm text-gray-700">At 20 gwei gas and current ETH prices, the 0.03% fee advantage over Aave breaks even at:</p><ul class="text-sm text-gray-700 ml-4 mt-2 space-y-1"><li>‚Ä¢ ~$65k loan size (2 providers, toNative)</li><li>‚Ä¢ ~$130k loan size (3 providers, toNative)</li><li>‚Ä¢ Smaller for WETH-only mode</li></ul></div></div></section><section class="bg-white rounded-xl shadow p-8 border border-gray-200"><h2 class="text-2xl font-bold text-gray-900 mb-6">üéØ Recommendations for Borrowers</h2><div class="grid md:grid-cols-2 gap-6"><div class="bg-green-50 border border-green-200 rounded-lg p-5"><h3 class="font-semibold text-green-900 mb-3 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg>FlashBank is Better When:</h3><ul class="text-sm text-green-800 space-y-2"><li>‚Ä¢ Large loans (&gt;$100k) where fee savings dominate</li><li>‚Ä¢ You value custody guarantees for providers</li><li>‚Ä¢ You can accept WETH directly (toNative=false)</li><li>‚Ä¢ You need more liquidity than Aave has available</li><li>‚Ä¢ Gas prices are low (&lt;15 gwei)</li></ul></div><div class="bg-orange-50 border border-orange-200 rounded-lg p-5"><h3 class="font-semibold text-orange-900 mb-3 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></svg>Use Aave Instead When:</h3><ul class="text-sm text-orange-800 space-y-2"><li>‚Ä¢ Small loans (&lt;$10k) from many providers</li><li>‚Ä¢ Gas prices are very high (&gt;50 gwei)</li><li>‚Ä¢ High-frequency trading with tight margins</li><li>‚Ä¢ You need multi-asset flash loans in one call</li><li>‚Ä¢ Absolute minimum gas is critical</li></ul></div></div></section><div class="mt-8 text-center"><a href="/guides/borrow" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium">‚Üê Back to Borrower Guide</a></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/gas-study","query":{},"buildId":"4mw4L_P0hGxsGAZ4xmqQq","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>