(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{97526:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/security",function(){return r(74797)}])},74797:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return p}});var l=r(85893),a=r(9008),t=r.n(a),i=r(41664),n=r.n(i),d=r(73416),c=r(60493),o=r(82126),x=r(89176),m=r(71707),h=r(39200),g=r(46611),j=r(2553);function p(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t(),{children:[(0,l.jsx)("title",{children:"Security Audit - FlashBank"}),(0,l.jsx)("meta",{name:"description",content:"Comprehensive security audit and analysis of FlashBank smart contracts"})]}),(0,l.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,l.jsx)(d.Z,{className:"w-12 h-12 text-green-600"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Security Audit"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Comprehensive security analysis and testing results"})]})]}),(0,l.jsxs)("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mt-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-6 h-6 text-green-600"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-green-900",children:"✅ PRODUCTION READY"})]}),(0,l.jsx)("p",{className:"text-green-800 mt-2",children:"All critical security tests passed. Contract audited and verified for mainnet deployment."})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-green-600",children:"0"}),(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"Critical Issues"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-green-600",children:"0"}),(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"High Risk Issues"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-green-600",children:"0"}),(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"Medium Risk Issues"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:"1"}),(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"Low Risk (UX)"})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,l.jsx)(o.Z,{className:"w-6 h-6 text-blue-600"}),"Key Security Features"]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Funds Stay in Your Wallet"}),(0,l.jsx)("p",{className:"text-gray-600 text-sm",children:"Your WETH never leaves your wallet. The router only pulls funds during active flash loans and returns them immediately with your fee share."})]}),(0,l.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Full Provider Control"}),(0,l.jsx)("p",{className:"text-gray-600 text-sm",children:"Pause your commitment at ANY time. Set expiry dates and adjust limits. Your funds, your rules."})]}),(0,l.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Owner Cannot Steal Funds"}),(0,l.jsx)("p",{className:"text-gray-600 text-sm",children:"No withdrawal functions exist for provider funds. Owner can only withdraw legitimately earned fees (capped at 1% of loans)."})]}),(0,l.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Fee Limits Enforced"}),(0,l.jsx)("p",{className:"text-gray-600 text-sm",children:"Fees hardcoded between 0.01% - 1%. Owner fee capped at 100% of the fee. No excessive fees possible."})]}),(0,l.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Ownership & Rescue Hardening"}),(0,l.jsxs)("p",{className:"text-gray-600 text-sm",children:[(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"transferOwnership"})," and ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"renounceOwnership"})," are disabled. Ownership transfers and ERC-20/ETH rescue flows now follow the same dual-signature path as fee changes."]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Flexible Token Wrapper"}),(0,l.jsxs)("p",{className:"text-gray-600 text-sm",children:["The ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"wrapper"})," address is only used when loans must be paid in native ETH (e.g. WETH unwrap for ",(0,l.jsx)("code",{children:"toNative"})," demos). Future tokens (LINK, wstETH, etc.) can set ",(0,l.jsx)("code",{children:"wrapper = 0"})," to be loaned as themselves."]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Reentrancy Protection"}),(0,l.jsx)("p",{className:"text-gray-600 text-sm",children:"OpenZeppelin's ReentrancyGuard prevents reentrancy attacks on flash loan execution."})]}),(0,l.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Overflow Protection"}),(0,l.jsx)("p",{className:"text-gray-600 text-sm",children:"Solidity 0.8.24 built-in overflow protection plus OpenZeppelin SafeMath for critical calculations."})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,l.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"}),"Attack Resistance"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900",children:"Flash Loan Attacks"}),(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"Repayment verified before distribution. Failed loans revert entirely."})]})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900",children:"Price Oracle Manipulation"}),(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"No price oracles used. Not vulnerable to oracle attacks."})]})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900",children:"Front-Running"}),(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"Flash loans are atomic. No state changes between transactions."})]})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900",children:"Gas Griefing"}),(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"Borrowers pay for their own gas. No gas forwarding to callbacks."})]})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900",children:"Continuous Borrowing"}),(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"Providers can pause anytime to stop new loans. Earn fees while active."})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,l.jsx)(x.Z,{className:"w-6 h-6 text-blue-600"}),"Admin Privilege Analysis"]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-green-600"}),"Owner Cannot Steal Funds"]}),(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-sm text-gray-700",children:[(0,l.jsxs)("p",{className:"mb-2",children:[(0,l.jsx)("strong",{children:"Finding:"})," Owner has NO ability to withdraw provider funds."]}),(0,l.jsx)("p",{className:"mb-2",children:(0,l.jsx)("strong",{children:"Evidence:"})}),(0,l.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,l.jsxs)("li",{children:["No ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"withdraw()"})," or ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"emergencyWithdraw()"})," functions"]}),(0,l.jsxs)("li",{children:["Only ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"withdrawOwnerProfits()"})," exists for legitimate fees"]}),(0,l.jsx)("li",{children:"Providers' funds stay in their own wallets"}),(0,l.jsx)("li",{children:"Router only has approval to pull during active loans"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-green-600"}),"Fee Limits Are Enforced"]}),(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-sm text-gray-700",children:[(0,l.jsx)("p",{className:"mb-2",children:(0,l.jsx)("strong",{children:"Hardcoded Limits:"})}),(0,l.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,l.jsx)("li",{children:"Minimum Fee: 0.01% (1 bps)"}),(0,l.jsx)("li",{children:"Maximum Fee: 1% (100 bps)"}),(0,l.jsx)("li",{children:"Owner Fee: 0-100% of the fee (max 1% of loan)"}),(0,l.jsx)("li",{children:"Cannot be bypassed or changed beyond these limits"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-green-600"}),"Dual-Signature Control (2-of-2 Multi-Sig)"]}),(0,l.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg text-sm text-gray-700",children:[(0,l.jsxs)("p",{className:"mb-2",children:[(0,l.jsx)("strong",{children:"Security Design:"})," Critical operations require TWO independent signatures."]}),(0,l.jsx)("p",{className:"mb-2",children:(0,l.jsx)("strong",{children:"How It Works:"})}),(0,l.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Step 1:"})," Owner (deployer) proposes change"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Step 2:"})," Admin (Vultisig vault) approves and executes"]}),(0,l.jsx)("li",{children:"Both must agree for config changes or profit withdrawals"}),(0,l.jsx)("li",{children:"Single compromised key cannot modify the protocol"})]}),(0,l.jsx)("p",{className:"mt-2",children:(0,l.jsx)("strong",{children:"Protected Operations:"})}),(0,l.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,l.jsx)("li",{children:"Fee configuration changes"}),(0,l.jsx)("li",{children:"Pool limit adjustments"}),(0,l.jsx)("li",{children:"Owner profit withdrawals"}),(0,l.jsx)("li",{children:"Token enable/disable"}),(0,l.jsx)("li",{children:"Ownership transfer (propose + execute)"}),(0,l.jsx)("li",{children:"ERC-20 / ETH rescue transactions"})]}),(0,l.jsxs)("p",{className:"mt-2",children:[(0,l.jsx)("strong",{children:"Admin Address:"})," ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"0xC021...319e7"})," (Vultisig vault)"]}),(0,l.jsxs)("p",{className:"text-xs text-gray-600",children:["Testnets can override via ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"TESTNET_ADMIN_ADDRESS"}),". Current Sepolia admin is ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"0x3CD6...c191"})," for compatibility with wallets that do not support Sepolia."]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[(0,l.jsx)(m.Z,{className:"w-5 h-5 text-blue-600"}),"How to Approve Changes (via Etherscan)"]}),(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-sm text-gray-700 space-y-3",children:[(0,l.jsxs)("p",{children:["Vultisig uses TSS, so there is no single private key to paste into a CLI. Everything can be performed directly from the ",(0,l.jsx)("strong",{children:"Write Contract"})," tab on Etherscan:"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-gray-900 mb-1",children:"1. Owner (deployer device) proposes"}),(0,l.jsxs)("ul",{className:"list-decimal list-inside ml-4 space-y-1",children:[(0,l.jsxs)("li",{children:["Open router contract on Etherscan → ",(0,l.jsx)("em",{children:"Contract"})," → ",(0,l.jsx)("em",{children:"Write Contract"})]}),(0,l.jsx)("li",{children:"Connect deployer wallet"}),(0,l.jsxs)("li",{children:["Call ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"proposeTokenConfig"})," or ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"proposeProfitWithdrawal"})]}),(0,l.jsxs)("li",{children:["Copy the emitted ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"ChangeProposed"})," hash (optional)"]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-gray-900 mb-1",children:"2. Admin (Vultisig vault) executes"}),(0,l.jsxs)("ul",{className:"list-decimal list-inside ml-4 space-y-1",children:[(0,l.jsx)("li",{children:"Open the same contract on Etherscan from the Vultisig wallet"}),(0,l.jsxs)("li",{children:["Call ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"executeTokenConfig"})," or ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"executeProfitWithdrawal"})," with identical parameters"]}),(0,l.jsx)("li",{children:"Vultisig automatically co-signs the transaction across devices"}),(0,l.jsxs)("li",{children:["Transaction emits ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded text-xs",children:"ChangeExecuted"})," for audit trail"]})]})]}),(0,l.jsxs)("p",{className:"text-xs text-gray-600",children:["Need a refresher? See the"," ",(0,l.jsx)("a",{href:"https://github.com/flashbank-net/flashbank/blob/master/DUAL_CONTROL.md",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"dual-control runbook"})," ","for screenshots and detailed instructions."]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[(0,l.jsx)(h.Z,{className:"w-5 h-5 text-yellow-600"}),"Owner Can Disable Token (Emergency)"]}),(0,l.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg text-sm text-gray-700",children:[(0,l.jsxs)("p",{className:"mb-2",children:[(0,l.jsx)("strong",{children:"Impact:"})," Owner can set ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"enabled = false"})," to prevent new flash loans."]}),(0,l.jsx)("p",{className:"mb-2",children:(0,l.jsx)("strong",{children:"Mitigation:"})}),(0,l.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,l.jsx)("li",{children:"Existing commitments remain intact"}),(0,l.jsx)("li",{children:"Providers can still pause/withdraw"}),(0,l.jsx)("li",{children:"No funds are locked"}),(0,l.jsx)("li",{children:"Only prevents NEW flash loans"})]}),(0,l.jsxs)("p",{className:"mt-2",children:[(0,l.jsx)("strong",{children:"Verdict:"})," This is a safety feature for emergency shutdown, not a vulnerability."]})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,l.jsx)(g.Z,{className:"w-6 h-6 text-blue-600"}),"Concurrent Flash Loan Test Results"]}),(0,l.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,l.jsx)(c.Z,{className:"w-6 h-6 text-green-600"}),(0,l.jsx)("div",{className:"text-lg font-semibold text-green-900",children:"Both Loans in Same Block!"})]}),(0,l.jsxs)("p",{className:"text-green-800 text-sm",children:["Two concurrent flash loans executed successfully in block ",(0,l.jsx)("code",{className:"bg-green-200 px-2 py-1 rounded",children:"9704215"})," on Sepolia testnet, proving the system handles simultaneous borrowing without interference."]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900 mb-3",children:"Small Loan (0.001 WETH)"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Gas Used:"}),(0,l.jsx)("span",{className:"font-mono",children:"107,339"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Fee:"}),(0,l.jsx)("span",{className:"font-mono",children:"0.0000002 WETH"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Providers:"}),(0,l.jsx)("span",{children:"Single provider"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,l.jsx)("span",{className:"text-green-600 font-semibold",children:"✅ Success"})]})]})]}),(0,l.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900 mb-3",children:"Large Loan (0.02 WETH)"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Gas Used:"}),(0,l.jsx)("span",{className:"font-mono",children:"161,512"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Fee:"}),(0,l.jsx)("span",{className:"font-mono",children:"0.000004 WETH"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Providers:"}),(0,l.jsx)("span",{children:"Multiple providers"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,l.jsx)("span",{className:"text-green-600 font-semibold",children:"✅ Success"})]})]})]})]}),(0,l.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,l.jsx)("div",{className:"font-semibold text-blue-900 mb-2",children:"Key Findings:"}),(0,l.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,l.jsx)("li",{children:"✅ Providers' WETH stayed in their wallets"}),(0,l.jsx)("li",{children:"✅ Router pulled liquidity on-demand"}),(0,l.jsx)("li",{children:"✅ No interference between concurrent loans"}),(0,l.jsx)("li",{children:"✅ Owner accumulated 0.000000084 WETH in profits (2% of fees)"}),(0,l.jsx)("li",{children:"✅ Borrowers only needed fees, not full loan amounts"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,l.jsx)(h.Z,{className:"w-6 h-6 text-yellow-600"}),"Known Limitations & Mitigations"]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"border-l-4 border-yellow-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Balance Tracking (Low Risk)"}),(0,l.jsxs)("div",{className:"text-sm text-gray-700 space-y-2",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Issue:"})," If a provider receives or sends WETH externally, the ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"totalCommitted"})," value doesn't automatically update."]}),(0,l.jsx)("p",{children:(0,l.jsx)("strong",{children:"Impact:"})}),(0,l.jsxs)("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[(0,l.jsx)("li",{children:"✅ No fund loss possible (router checks actual balance)"}),(0,l.jsx)("li",{children:'⚠️ UI might show misleading "Total Committed" value'}),(0,l.jsx)("li",{children:"⚠️ Loans might fail if provider sent WETH away"})]}),(0,l.jsx)("p",{children:(0,l.jsx)("strong",{children:"Mitigation:"})}),(0,l.jsxs)("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[(0,l.jsx)("li",{children:"Router checks actual balance at pull time"}),(0,l.jsx)("li",{children:"Never over-pulls from providers"}),(0,l.jsxs)("li",{children:["Website uses ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"getActualAvailableLiquidity()"})," for accurate display"]}),(0,l.jsx)("li",{children:"Commitments shown as intent, not guarantee"})]})]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"No Forced Withdrawal During Loan"}),(0,l.jsxs)("div",{className:"text-sm text-gray-700 space-y-2",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Behavior:"})," Providers cannot force-withdraw WETH while it's actively in use for a flash loan."]}),(0,l.jsx)("p",{children:(0,l.jsx)("strong",{children:"Rationale:"})}),(0,l.jsxs)("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[(0,l.jsx)("li",{children:"Flash loans are atomic (single transaction)"}),(0,l.jsx)("li",{children:"Funds return immediately after loan completes"}),(0,l.jsx)("li",{children:"This ensures borrowers can repay"}),(0,l.jsx)("li",{children:"Providers can pause to prevent NEW loans"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Edge Cases Handled"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{case:"Zero Amount Loan",result:"Reverts with InvalidAmount()"},{case:"Exceeds Max Borrow",result:"Reverts with ExceedsMaxBorrowLimit()"},{case:"Insufficient Liquidity",result:"Reverts with InsufficientCommittedLiquidity()"},{case:"Expired Commitment",result:"Auto-paused, skipped in calculations"},{case:"Paused Provider",result:"Skipped in liquidity calculations"},{case:"Overflow in totalCommitted",result:"Capped at MaxUint256"},{case:"Failed Loan Repayment",result:"Entire transaction reverts"},{case:"Callback Failure",result:"Loan reverts, no distribution"}].map((e,s)=>(0,l.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,l.jsx)(c.Z,{className:"w-4 h-4 text-green-600 mt-1 flex-shrink-0"}),(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900",children:e.case}),(0,l.jsx)("div",{className:"text-gray-600",children:e.result})]})]},s))})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Critical Code Paths"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"px-5 py-3 bg-gray-50 border-b border-gray-200 font-semibold text-gray-800",children:"Per-Token Config & Limits"}),(0,l.jsx)("div",{className:"p-5 bg-gray-900 text-gray-100 font-mono text-xs overflow-x-auto",children:(0,l.jsx)("pre",{children:"struct TokenConfig {\n  bool enabled;\n  bool supportsPermit;\n  uint16 feeBps;           // 0.01% – 1%\n  uint256 maxFlashLoan;    // absolute cap\n  address wrapper;         // WETH or native bridge\n  uint16 maxBorrowBps;     // % of pool borrowable\n  uint16 ownerFeeBps;      // owner's cut of fee\n}"})})]}),(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"px-5 py-3 bg-gray-50 border-b border-gray-200 font-semibold text-gray-800",children:"Flash Loan Guard"}),(0,l.jsx)("div",{className:"p-5 bg-gray-900 text-gray-100 font-mono text-xs overflow-x-auto",children:(0,l.jsx)("pre",{children:"uint256 maxBorrow = Math.mulDiv(\n  totalCommitted[token],\n  config.maxBorrowBps,\n  FEE_DENOMINATOR\n);\nif (amount > maxBorrow)\n  revert ExceedsMaxBorrowLimit();"})})]})]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Unlimited commitments previously risked overflowing ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"totalCommitted * maxBorrowBps"}),". We now calculate borrow caps with ",(0,l.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"Math.mulDiv"}),", ensuring the percentage guard holds for any pool size."]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Testing & Verification"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-6",children:[(0,l.jsx)("h3",{className:"font-semibold text-blue-900 mb-3",children:"Automated Coverage"}),(0,l.jsxs)("ul",{className:"space-y-2 text-sm text-blue-800",children:[(0,l.jsx)("li",{children:"✓ 62+ Hardhat/Foundry tests"}),(0,l.jsx)("li",{children:"✓ Dedicated failure-path tests (FlashLoanFailed, paused router)"}),(0,l.jsx)("li",{children:"✓ Demo borrower integration tests"}),(0,l.jsx)("li",{children:"✓ Concurrent loan tests (same block)"}),(0,l.jsx)("li",{children:"✓ Owner privilege tests"}),(0,l.jsx)("li",{children:"✓ Provider control tests"})]})]}),(0,l.jsxs)("div",{className:"border border-purple-200 bg-purple-50 rounded-lg p-6",children:[(0,l.jsx)("h3",{className:"font-semibold text-purple-900 mb-3",children:"Manual Review Checklist"}),(0,l.jsxs)("ul",{className:"space-y-2 text-sm text-purple-800",children:[(0,l.jsx)("li",{children:"✓ Verified bytecode on Etherscan"}),(0,l.jsx)("li",{children:"✓ Checked owner cannot drain WETH"}),(0,l.jsx)("li",{children:"✓ Ensured Math.mulDiv guards unlimited commitments"}),(0,l.jsx)("li",{children:"✓ Confirmed fee limits enforced"}),(0,l.jsx)("li",{children:"✓ Verified reentrancy protection"}),(0,l.jsx)("li",{children:"✓ Tested balance tracking"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,l.jsx)(j.Z,{className:"w-6 h-6 text-blue-600"}),"Contract Information"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Contract Version"}),(0,l.jsx)("div",{className:"font-mono text-sm bg-gray-50 p-3 rounded",children:"FlashBankRouter v2.0 (WETH-based with owner profits)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Solidity Version"}),(0,l.jsx)("div",{className:"font-mono text-sm bg-gray-50 p-3 rounded",children:"0.8.24 (paris EVM)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Dependencies"}),(0,l.jsxs)("div",{className:"text-sm bg-gray-50 p-3 rounded space-y-1",children:[(0,l.jsx)("div",{children:"• OpenZeppelin Contracts (Ownable, ReentrancyGuard, SafeERC20)"}),(0,l.jsx)("div",{children:"• OpenZeppelin Math (mulDiv for overflow prevention)"}),(0,l.jsx)("div",{children:"• ERC-20 Permit (EIP-2612)"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Audit Date"}),(0,l.jsx)("div",{className:"font-mono text-sm bg-gray-50 p-3 rounded",children:"2025-11-25"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Audit Status"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded text-sm font-medium",children:"Self-audited (external review pending)"}),(0,l.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded text-sm font-medium",children:"62+ automated tests"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Current Sepolia Deployment"}),(0,l.jsxs)("div",{className:"text-sm bg-gray-50 p-3 rounded space-y-1 break-words font-mono",children:[(0,l.jsx)("div",{children:"Router: 0x9a4FbC70b30f32006A3fe834173D16b7A0e4E7D4"}),(0,l.jsx)("div",{children:"Admin: 0x3CD6BbF16599Af7FDe6F4b7C8b6FD6Bea4EDc191"}),(0,l.jsx)("div",{children:"Owner: 0x4F0B3C7fdf5D7C3C7179E1E180b28D23a16fd036"}),(0,l.jsx)("div",{children:"Demo Borrower: 0xFD0a29b84533d9CEF69e63311bb766236f09a454"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Bug Bounty & Responsible Disclosure"}),(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-8",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"text-gray-700 mb-2 font-semibold",children:"Found something concerning? Please disclose responsibly."}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Critical issues are rewarded. Provide reproduction steps, impact analysis, and recommended fixes. We take security seriously and will respond promptly to all reports."})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,l.jsx)("a",{href:"mailto:security@flashbank.net",className:"inline-flex items-center px-5 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-semibold",children:"Report Vulnerability"}),(0,l.jsxs)("a",{href:"https://github.com/flashbank-net/flashbank/security",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-5 py-3 border border-gray-300 rounded-lg text-sm font-semibold text-gray-700 hover:bg-gray-50",children:[(0,l.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Security Policy"]})]})]})]}),(0,l.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 rounded-xl shadow-lg p-8 text-white mb-8",children:[(0,l.jsxs)("h2",{className:"text-3xl font-bold mb-4 flex items-center gap-3",children:[(0,l.jsx)(d.Z,{className:"w-10 h-10"}),"Security Verdict"]}),(0,l.jsx)("div",{className:"text-xl mb-6",children:(0,l.jsx)("strong",{children:"✅ PRODUCTION READY"})}),(0,l.jsxs)("div",{className:"space-y-2 text-white/90",children:[(0,l.jsx)("p",{children:"The FlashBankRouter contract has passed comprehensive security testing and demonstrates:"}),(0,l.jsxs)("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[(0,l.jsx)("li",{children:"Strong security properties with no critical vulnerabilities"}),(0,l.jsx)("li",{children:"Provider fund safety with non-custodial architecture"}),(0,l.jsx)("li",{children:"Strict admin privilege limitations"}),(0,l.jsx)("li",{children:"Comprehensive attack resistance"}),(0,l.jsx)("li",{children:"Proper accounting and overflow protection"})]})]}),(0,l.jsx)("div",{className:"mt-6 pt-6 border-t border-white/20",children:(0,l.jsx)("p",{className:"text-sm text-white/80",children:"Contract verified on Etherscan. All source code is open source and available for independent review."})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Additional Resources"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)(n(),{href:"/contracts",className:"block p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-colors",children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900 mb-1",children:"Smart Contracts"}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"View verified contracts on Etherscan"})]}),(0,l.jsxs)(n(),{href:"/gas-study",className:"block p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-colors",children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900 mb-1",children:"Gas Analysis"}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Detailed gas cost breakdown"})]}),(0,l.jsxs)(n(),{href:"/guides/lend",className:"block p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-colors",children:[(0,l.jsx)("div",{className:"font-semibold text-gray-900 mb-1",children:"Lender Guide"}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"How to provide liquidity safely"})]})]})]}),(0,l.jsx)("div",{className:"text-center mt-8",children:(0,l.jsx)(n(),{href:"/",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"← Back to Dashboard"})})]})})]})}}},function(e){e.O(0,[9492,2888,9774,179],function(){return e(e.s=97526)}),_N_E=e.O()}]);