(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(54925)}])},54925:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var s=a(85893),r=a(67294),n=a(9008),l=a.n(n),i=a(96110),o=a(4222),d=a(28058),c=a(82002),m=a(48104),u=a(60533),p=a(88168),x=a(64007),h=a(86501),y=a(46611),b=a(73416),f=a(49664),g=a(40758),N=a(96591),w=a(71213);let j=()=>{let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(!0)},[]),e};var v=a(83454);let T={1:{name:"Ethereum",rpcUrl:v.env.NEXT_PUBLIC_MAINNET_RPC_URL||"https://cloudflare-eth.com",router:v.env.NEXT_PUBLIC_MAINNET_ROUTER_ADDRESS||"",explorer:"https://etherscan.io",color:"purple",tokens:[{key:"weth",name:"Wrapped Ether",symbol:"WETH",address:v.env.NEXT_PUBLIC_MAINNET_WETH_ADDRESS||"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",decimals:18,supportsPermit:!0}],demoBorrower:v.env.NEXT_PUBLIC_MAINNET_DEMO_BORROWER_ADDRESS||"",proofSink:v.env.NEXT_PUBLIC_MAINNET_PROOF_SINK_ADDRESS||"",demoCounter:v.env.NEXT_PUBLIC_MAINNET_DEMO_COUNTER_ADDRESS||""},8453:{name:"Base",rpcUrl:v.env.NEXT_PUBLIC_BASE_RPC_URL||"https://mainnet.base.org",router:v.env.NEXT_PUBLIC_BASE_ROUTER_ADDRESS||"",explorer:"https://basescan.org",color:"blue",tokens:[{key:"weth",name:"Wrapped Ether",symbol:"WETH",address:v.env.NEXT_PUBLIC_BASE_WETH_ADDRESS||"0x4200000000000000000000000000000000000006",decimals:18,supportsPermit:!0}],demoBorrower:v.env.NEXT_PUBLIC_BASE_DEMO_BORROWER_ADDRESS||"",proofSink:v.env.NEXT_PUBLIC_BASE_PROOF_SINK_ADDRESS||"",demoCounter:v.env.NEXT_PUBLIC_BASE_DEMO_COUNTER_ADDRESS||""},42161:{name:"Arbitrum",rpcUrl:v.env.NEXT_PUBLIC_ARBITRUM_RPC_URL||"https://arb1.arbitrum.io/rpc",router:v.env.NEXT_PUBLIC_ARBITRUM_ROUTER_ADDRESS||"",explorer:"https://arbiscan.io",color:"green",tokens:[{key:"weth",name:"Wrapped Ether",symbol:"WETH",address:v.env.NEXT_PUBLIC_ARBITRUM_WETH_ADDRESS||"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",decimals:18,supportsPermit:!0}],demoBorrower:v.env.NEXT_PUBLIC_ARBITRUM_DEMO_BORROWER_ADDRESS||"",proofSink:v.env.NEXT_PUBLIC_ARBITRUM_PROOF_SINK_ADDRESS||"",demoCounter:v.env.NEXT_PUBLIC_ARBITRUM_DEMO_COUNTER_ADDRESS||""},11155111:{name:"Sepolia",rpcUrl:v.env.NEXT_PUBLIC_SEPOLIA_RPC_URL||"https://ethereum-sepolia-rpc.publicnode.com",router:"0x47CcD1586D911Eb253e3a2105bc28BBF48ECc787",explorer:"https://sepolia.etherscan.io",color:"yellow",tokens:[{key:"weth",name:"Wrapped Ether",symbol:"WETH",address:"0xdd13E55209Fd76AfE204dBda4007C227904f0a81",decimals:18,supportsPermit:!1}],demoBorrower:"0x5391EEB7304c5984D13fFD6C480fD2b4c75246eA",proofSink:"0x4731d7474CFaEf1a6C074Bb62876b1c2ef65De3F",demoCounter:"0x3B9205649c4e6a182d9d95241bAf0a39774F17A8"}},E=[{inputs:[{internalType:"address",name:"token",type:"address"},{components:[{internalType:"bool",name:"enabled",type:"bool"},{internalType:"bool",name:"supportsPermit",type:"bool"},{internalType:"uint16",name:"feeBps",type:"uint16"},{internalType:"uint256",name:"maxFlashLoan",type:"uint256"},{internalType:"address",name:"wrapper",type:"address"}],internalType:"struct FlashBankRouter.TokenConfig",name:"config",type:"tuple"}],name:"setTokenConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"limit",type:"uint256"},{internalType:"uint48",name:"expiry",type:"uint48"},{internalType:"bool",name:"paused",type:"bool"}],name:"setCommitment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"quoteFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"provider",type:"address"}],name:"getProviderInfo",outputs:[{internalType:"uint256",name:"limit",type:"uint256"},{internalType:"uint256",name:"inUse",type:"uint256"},{internalType:"uint48",name:"expiry",type:"uint48"},{internalType:"bool",name:"paused",type:"bool"},{internalType:"bool",name:"registered",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getTokenStats",outputs:[{internalType:"uint256",name:"committed",type:"uint256"},{internalType:"uint256",name:"activeProviders",type:"uint256"},{internalType:"uint16",name:"feeBps",type:"uint16"},{internalType:"uint256",name:"maxFlashLoan",type:"uint256"},{internalType:"bool",name:"supportsPermit",type:"bool"},{internalType:"uint16",name:"maxBorrowBps",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getProviders",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"}],_=[{inputs:[],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],C=[{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"runDemo",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"runDemoFail",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"}],S=[{inputs:[],name:"getStats",outputs:[{internalType:"uint256",name:"total",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"}],R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(!e)return"0";let a="bigint"==typeof e?Number(i.dF(e)):Number(e);return a>1e20?"Unlimited":a.toFixed(t)},k=e=>e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"";function D(){let{address:e,isConnected:t}=(0,d.Tj)(),a=(0,c.x)(),n=(0,m.t)({chainId:a}),{data:v}=(0,u.p)(),{switchChain:D}=(0,p.o)(),{disconnect:B}=(0,x.q)(),P=j(),[F,A]=(0,r.useState)("weth"),[U,H]=(0,r.useState)("0"),[W,I]=(0,r.useState)(0n),[L,M]=(0,r.useState)(!0),[O,X]=(0,r.useState)("None"),[Z,q]=(0,r.useState)(!1),[z,K]=(0,r.useState)("0"),[G,V]=(0,r.useState)(0n),[Y,J]=(0,r.useState)("0"),[Q,$]=(0,r.useState)("0"),[ee,et]=(0,r.useState)(""),[ea,es]=(0,r.useState)(!0),[er,en]=(0,r.useState)(!1),[el,ei]=(0,r.useState)("0.1"),[eo,ed]=(0,r.useState)("0.1"),[ec,em]=(0,r.useState)({committed:"0",providers:"0",feeBps:0}),[eu,ep]=(0,r.useState)("0"),[ex,eh]=(0,r.useState)("0.1"),[ey,eb]=(0,r.useState)(!1),[ef,eg]=(0,r.useState)(null),[eN,ew]=(0,r.useState)(null),[ej,ev]=(0,r.useState)(!1),[eT,eE]=(0,r.useState)("none"),[e_,eC]=(0,r.useState)(null),[eS,eR]=(0,r.useState)("0"),ek=T[a]||T[11155111],eD=(0,r.useMemo)(()=>ek.tokens.find(e=>e.key===F)||ek.tokens[0],[ek,F]);(0,r.useEffect)(()=>{ek.tokens.find(e=>e.key===F)||A(ek.tokens[0].key)},[ek,F]);let eB=ek.router&&(null==eD?void 0:eD.address),eP=(0,r.useCallback)(async()=>{if(!eB||!eD||!ek.router||!n){em({committed:"0",providers:"0",feeBps:0}),ep("0");return}try{let e=await n.readContract({address:ek.router,abi:E,functionName:"getTokenStats",args:[eD.address]}),t=await n.readContract({address:ek.router,abi:E,functionName:"getProviders",args:[eD.address]}),a=0n;for(let e of t){let t=await n.readContract({address:ek.router,abi:E,functionName:"getProviderInfo",args:[eD.address,e]}),s=t[0];if(!t[3]&&s>0n){let t=await n.readContract({address:eD.address,abi:_,functionName:"balanceOf",args:[e]});a+=t<s?t:s}}em({committed:i.dF(a),providers:e[1].toString(),feeBps:Number(e[2])});let s=await n.readContract({address:ek.router,abi:E,functionName:"quoteFee",args:[eD.address,i.fi(ex||"0")]});ep(i.dF(s))}catch(e){console.error("Failed to load pool stats",e),em({committed:"0",providers:"0",feeBps:0}),ep("0")}},[eB,eD,ek,ex,n]),eF=(0,r.useCallback)(async()=>{if(!n||!P||!eD||!t||!e){H("Not set"),I(0n),M(!0),X("None"),q(!1),K("0"),V(0n),J("0"),$("0");return}try{let t=await n.readContract({address:eD.address,abi:_,functionName:"balanceOf",args:[e]});J(i.dF(t));let a=await n.getBalance({address:e});if($(i.dF(a)),eB&&ek.router){let t=await n.readContract({address:ek.router,abi:E,functionName:"getProviderInfo",args:[eD.address,e]}),a=t[0],s=!!t[4];if(q(s),s){let e=a===o.Bz;H(e?"Unlimited":i.dF(a)),I(a),M(!!t[3]),er||(es(e),et(e?"":i.dF(a)))}else H("Not set"),I(0n),er||(es(!0),et("")),M(!1);let r=t[2];X(r&&r>0n?new Date(1e3*Number(r)).toLocaleString():"None");let l=await n.readContract({address:eD.address,abi:_,functionName:"allowance",args:[e,ek.router]});V(l),l===o.Bz?K("Unlimited"):0n===l?K("0"):K(i.dF(l))}else H("Not set"),I(0n),q(!1),er||(es(!0),et("")),M(!0),X("None"),K("0"),V(0n)}catch(e){console.error("Failed to load account state",e)}},[P,t,e,eB,eD,ek,n]);(0,r.useEffect)(()=>{eP()},[eP]),(0,r.useEffect)(()=>{eF()},[eF]),(0,r.useEffect)(()=>{Z||er||(es(!0),et(""))},[Z,er]);let eA=(0,r.useCallback)(async()=>{if(!n||!ek.demoCounter){eR("0");return}try{let e=await n.readContract({address:ek.demoCounter,abi:S,functionName:"getStats"});eR(i.dF(e[0]))}catch(e){console.error("Failed to load demo counter",e),eR("0")}},[n,ek]);(0,r.useEffect)(()=>{eA()},[eA]);let eU=async function(t,a,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!v||!n||!e)throw Error("Wallet not ready");let{value:i,allowRevert:o}=l;try{let{request:l}=await n.simulateContract({address:t,abi:a,functionName:s,args:r,account:e,value:i});return await v.writeContract(l)}catch(n){if(o)return console.warn("Simulation reverted but allowRevert=true, sending tx anyway"),await v.writeContract({address:t,abi:a,functionName:s,args:r,account:e,value:i});throw console.error(n),n}},eH=async()=>{if(!eB){h.ZP.error("Router address not configured for this network");return}if(eD&&n)try{let e;0n===G&&await h.ZP.promise((async()=>{let e=await eU(eD.address,_,"approve",[ek.router,o.Bz]);await n.waitForTransactionReceipt({hash:e}),await eF()})(),{loading:"Step 1/2: Approving router...",success:"Approved! Now setting commitment...",error:"Approval failed"});try{e=ea?o.Bz:i.fi(ee||"0")}catch(e){h.ZP.error("Enter a valid limit amount");return}await h.ZP.promise((async()=>{let t=await eU(ek.router,E,"setCommitment",[eD.address,e,0n,!1]);await n.waitForTransactionReceipt({hash:t}),await eF(),await eP(),en(!1)})(),{loading:0n===G?"Step 2/2: Setting commitment...":"Setting commitment...",success:"Commitment active!",error:"Commitment failed"})}catch(e){}},eW=async()=>{if(!eB){h.ZP.error("Router address not configured for this network");return}if(eD&&n)try{let e=!L;await h.ZP.promise((async()=>{let t=await eU(ek.router,E,"setCommitment",[eD.address,W,0n,e]);await n.waitForTransactionReceipt({hash:t}),await eF(),await eP(),en(!1)})(),{loading:e?"Pausing...":"Resuming...",success:e?"Paused":"Resumed",error:"Update failed"})}catch(e){}},eI=async()=>{if(eD&&n)try{let e=i.fi(el||"0");await h.ZP.promise((async()=>{let t=await eU(eD.address,_,"deposit",[],{value:e});await n.waitForTransactionReceipt({hash:t}),await eF()})(),{loading:"Wrapping ETH...",success:"Wrapped successfully",error:"Wrap failed"})}catch(e){}},eL=async()=>{if(eD&&n)try{let e=i.fi(eo||"0");await h.ZP.promise((async()=>{let t=await eU(eD.address,_,"withdraw",[e]);await n.waitForTransactionReceipt({hash:t}),await eF()})(),{loading:"Unwrapping WETH...",success:"Unwrapped successfully",error:"Unwrap failed"})}catch(e){}},eM=async e=>{if(ev(e),eE("none"),eC(null),!eD||!ek.demoBorrower||!ek.router||!n){h.ZP.error("Demo not configured for this network");return}try{let t;eb(!0),eg(null),ew(null),eR("0");let a=i.fi(ex||"0"),s=await n.readContract({address:ek.router,abi:E,functionName:"quoteFee",args:[eD.address,a]}),r=e?"runDemoFail":"runDemo",l=await eU(ek.demoBorrower,C,r,[a],{value:s,allowRevert:e});eg(l);try{t=await n.waitForTransactionReceipt({hash:l})}catch(e){if(!(t=await n.getTransactionReceipt({hash:l}).catch(()=>null)))throw e}if("reverted"===t.status){if(e)ew({amount:ex,fee:i.dF(s)}),eE("blocked"),eC("FlashLoanFailed (expected) – router blocked the theft attempt."),h.ZP.success("Borrow attempt blocked – funds stayed in the pool");else throw Error("Demo transaction reverted")}else ew({amount:ex,fee:i.dF(s)}),eE(e?"blocked":"success"),await eF(),await eP(),await eA(),h.ZP.success(e?"Borrow attempt executed and repaid":"Demo completed successfully!")}catch(t){let e=(null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||"Demo failed";h.ZP.error(e)}finally{eb(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"FlashBank Router - WETH Liquidity"}),(0,s.jsx)("meta",{name:"description",content:"Provide WETH liquidity directly from your wallet and earn flash loan fees."}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(h.x7,{position:"top-right"}),(0,s.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,s.jsxs)("div",{className:"container mx-auto px-6 py-4 flex flex-wrap gap-4 justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)(y.Z,{className:"h-6 w-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"FlashBank Router"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Permit-based WETH commitments (no deposits)"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[Object.entries(T).map(e=>{let[t,r]=e;return(0,s.jsx)("button",{onClick:()=>D({chainId:Number(t)}),className:"px-3 py-1 rounded-full text-sm ".concat(Number(t)===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"),children:r.name},t)}),t&&e?(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full text-sm text-gray-700",children:[(0,s.jsx)("span",{className:"font-mono",children:k(e)}),(0,s.jsx)("button",{onClick:()=>B(),className:"text-blue-600 hover:text-blue-800 transition-colors",children:"Disconnect"})]}):(0,s.jsx)("appkit-connect-button",{})]})]})}),(0,s.jsxs)("main",{className:"container mx-auto px-6 py-8 space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-gray-200",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"h-5 w-5 text-blue-500"}),"WETH Liquidity Overview"]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Committed"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[ec.committed," WETH"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Active Providers"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:ec.providers})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Fee"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[ec.feeBps," bps"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-gray-200",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-3 mb-6",children:ek.tokens.map(e=>(0,s.jsx)("button",{onClick:()=>A(e.key),className:"px-4 py-2 rounded-lg text-sm font-medium ".concat(e.key===F?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:e.symbol},e.key))}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Wallet Balances"}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["ETH: ",Q]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["WETH: ",Y]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Allowance: ","Unlimited"===z?"Unlimited":"".concat(z," WETH")]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"Wrap Amount (ETH)"}),(0,s.jsx)("input",{value:el,onChange:e=>ei(e.target.value),className:"w-full border rounded-lg px-3 py-2 mt-1"})]}),(0,s.jsxs)("button",{onClick:eI,className:"self-end bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4"})," Wrap"]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"Unwrap Amount (WETH)"}),(0,s.jsx)("input",{value:eo,onChange:e=>ed(e.target.value),className:"w-full border rounded-lg px-3 py-2 mt-1"})]}),(0,s.jsxs)("button",{onClick:eL,className:"self-end bg-gray-800 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4"})," Unwrap"]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Provide Liquidity"}),0n===G&&(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-sm text-yellow-800",children:"⚠️ Router not approved yet. The button below will approve and then set your commitment."})}),G>0n&&(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Current Limit:"," ","Unlimited"===U?"Unlimited":"Not set"===U?"Not set (set a limit to start lending)":"".concat(U," WETH")]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Status:"," ",Z?L?"⏸️ Paused":"✓ Active":"No commitment yet"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Expiry: ",O]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"unlimited-checkbox",checked:ea,onChange:e=>{es(e.target.checked),en(!0),e.target.checked&&et("")},className:"w-4 h-4 text-blue-600 rounded"}),(0,s.jsx)("label",{htmlFor:"unlimited-checkbox",className:"text-sm text-gray-700 cursor-pointer",children:"Unlimited commitment"})]}),(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"Commitment Limit (WETH)"}),(0,s.jsx)("input",{value:ee,onChange:e=>{et(e.target.value),en(!0),es(!1)},placeholder:ea?"Unlimited":"e.g. 10.0",disabled:ea,className:"w-full border rounded-lg px-3 py-2 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed"}),0n===G||er||!Z?(0,s.jsx)("button",{onClick:eH,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold",children:0n===G?"Approve & Set Commitment":Z?"Update Commitment":"Set Commitment"}):(0,s.jsx)("button",{onClick:eW,className:"w-full py-3 rounded-lg font-semibold flex items-center justify-center gap-2 ".concat(L?"bg-green-600 text-white":"bg-yellow-500 text-white"),children:L?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{className:"h-5 w-5"})," Resume"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.Z,{className:"h-5 w-5"})," Pause"]})})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-gray-200",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(w.Z,{className:"h-5 w-5 text-purple-500"}),"Demo Flash Loan"]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-green-900 mb-2",children:"✓ Success Demo"}),(0,s.jsx)("p",{className:"text-sm text-green-800",children:"Borrows WETH from the pool → unwraps to ETH → passes through counter (proving you used others' funds) → proves funds on-chain → repays router. Transaction succeeds."})]}),(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-red-900 mb-2",children:"✗ Fail Demo"}),(0,s.jsxs)("p",{className:"text-sm text-red-800",children:["Borrows WETH → unwraps → passes through counter → attempts to keep funds by sending to proof sink. Router detects missing repayment and ",(0,s.jsx)("strong",{children:"reverts the entire transaction"}),". Funds are safe."]})]})]}),ek.demoCounter&&(0,s.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-purple-900",children:"Demo Counter"}),(0,s.jsx)("p",{className:"text-xs text-purple-700",children:"Total ETH that has passed through the counter"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:eS}),(0,s.jsx)("p",{className:"text-xs text-purple-700",children:"ETH"})]})]})}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Demo Requirements:"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm text-blue-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[Number(ec.committed)>=Number(ex)?"✓":"✗",(0,s.jsxs)("span",{children:["Pool has ≥ ",ex," WETH committed (current: ",R(ec.committed,4)," WETH)"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[Number(Q)>=Number(eu)?"✓":"✗",(0,s.jsxs)("span",{children:["You have ≥ ",eu," ETH for the fee"]})]})]}),(0,s.jsx)("p",{className:"text-xs text-blue-700 mt-2 italic",children:"Note: The demo borrows from the pool, not your personal commitment"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"Amount (ETH)"}),(0,s.jsx)("input",{value:ex,onChange:e=>eh(e.target.value),className:"w-full border rounded-lg px-3 py-2 mt-1"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Estimated Fee: ",eu," ETH"]})]}),(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>eM(!1),disabled:ey||Number(ec.committed)<Number(ex)||Number(Q)<Number(eu),className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",title:Number(ec.committed)<Number(ex)||Number(Q)<Number(eu)?"Check requirements above":"Borrow, prove funds, and repay successfully",children:ey&&!ej?"Running...":"Run Demo (Success)"}),(0,s.jsx)("button",{onClick:()=>eM(!0),disabled:ey||Number(ec.committed)<Number(ex)||Number(Q)<Number(eu),className:"flex-1 bg-red-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",title:Number(ec.committed)<Number(ex)||Number(Q)<Number(eu)?"Check requirements above":"Attempt to steal funds - transaction will revert",children:ey&&ej?"Running...":"Run Demo (Fail)"})]})]}),ef&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Tx:"," ",(0,s.jsxs)("a",{href:"".concat(ek.explorer,"/tx/").concat(ef),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:[ef.slice(0,10),"...",ef.slice(-8)]})]}),eN&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Amount ",eN.amount," ETH \xb7 Fee ",eN.fee," ETH"]})]}),(0,s.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Transaction Flow:"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"}),(0,s.jsx)("a",{href:"".concat(ek.explorer,"/address/").concat(ek.router),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"Pool providers' WETH"}),(0,s.jsx)("span",{className:"text-gray-400",children:"→"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE6"}),(0,s.jsx)("a",{href:"".concat(ek.explorer,"/address/").concat(ek.router),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"FlashBank Router (unwrap)"}),(0,s.jsx)("span",{className:"text-gray-400",children:"→"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD16"}),(0,s.jsx)("a",{href:"".concat(ek.explorer,"/address/").concat(ek.demoBorrower),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"Demo Borrower (receives ETH)"}),(0,s.jsx)("span",{className:"text-gray-400",children:"→"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD22"}),(0,s.jsxs)("a",{href:"".concat(ek.explorer,"/address/").concat(ek.demoCounter),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:["Counter (proves you used ",null==eN?void 0:eN.amount," ETH)"]}),(0,s.jsx)("span",{className:"text-gray-400",children:"→"})]}),"success"===eT&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"✅"}),(0,s.jsx)("a",{href:"".concat(ek.explorer,"/address/").concat(ek.proofSink),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"Proof (refunds ETH)"}),(0,s.jsx)("span",{className:"text-gray-400",children:"→"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB8"}),(0,s.jsx)("span",{className:"text-green-600 font-semibold flex-1",children:"Repaid to Router + Fee"}),(0,s.jsx)("span",{className:"text-green-600",children:"✓"})]})]}),"blocked"===eT&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDEAB"}),(0,s.jsx)("a",{href:"".concat(ek.explorer,"/address/").concat(ek.proofSink),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"Proof (keeps ETH - theft attempt)"}),(0,s.jsx)("span",{className:"text-red-600",children:"✗"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-red-50 border border-red-200 rounded p-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"⛔"}),(0,s.jsx)("span",{className:"text-red-600 font-semibold flex-1",children:"Router detected missing repayment → REVERT"})]}),(0,s.jsx)("p",{className:"text-xs text-red-700 italic mt-2",children:"All state changes rolled back. Providers' WETH never left their wallets."})]}),"none"===eT&&(0,s.jsx)("p",{className:"text-xs text-gray-500 italic",children:"Run a demo to visualise the full flow."})]})]})]}),e_&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-2",children:e_})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Guide"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[(0,s.jsx)("li",{children:"Wrap the ETH amount you wish to make available (WETH stays in your wallet)."}),(0,s.jsx)("li",{children:"Approve the FlashBank Router once."}),(0,s.jsx)("li",{children:"Set your commitment limit and optional expiry. Pause/resume at any time."}),(0,s.jsx)("li",{children:"Earn 0.02% (configurable) each time your WETH is pulled into a flash loan."}),(0,s.jsx)("li",{children:"Use the demo to verify behaviour on Sepolia before moving to production chains."})]})]})]})]})]})}}},function(e){e.O(0,[9326,4990,4964,2888,9774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);