# Manual Contract Verification Guide

Due to Etherscan/Basescan API V1 deprecation, automated verification via Hardhat is currently unavailable. This guide provides everything needed for manual verification via the web interface.

---

## Quick Links

**Ethereum:** https://etherscan.io/verifyContract  
**Base:** https://basescan.org/verifyContract

---

## Contract Information

### Ethereum
- **Address:** `0xBDcC71d5F73962d017756A04919FBba9d30F0795`
- **Network:** Ethereum Mainnet (Chain ID: 1)
- **Deployment:** October 17, 2025

### Base
- **Address:** `0xBDcC71d5F73962d017756A04919FBba9d30F0795`
- **Network:** Base Mainnet (Chain ID: 8453)
- **Deployment:** October 13, 2025

### Arbitrum (Already Verified ✅)
- **Address:** `0x5c0156da501BC97DD35017Fb20624B7f1Ce7E095`
- **Status:** Verified on Arbiscan

---

## Compilation Settings

Use these **exact** settings when verifying:

### Compiler Configuration
- **Compiler Type:** Solidity (Single file)
- **Compiler Version:** `v0.8.19+commit.7dd6d404`
- **Open Source License Type:** `3) MIT`

### Optimisation Settings
- **Optimisation:** `Yes`
- **Runs:** `200`
- **Via IR:** `Yes` (IMPORTANT!)

### Constructor Arguments (ABI-encoded)
```
0000000000000000000000003cd6bbf16599af7fde6f4b7c8b6fd6bea4edc191
```

This is the owner address `0x3CD6BbF16599Af7FDe6F4b7C8b6FD6Bea4EDc191` encoded.

---

## Step-by-Step Verification Process

### 1. Get the Flattened Contract

The flattened contract has been generated. To view it:

```bash
cd /home/rotwang/flashbank-net
cat /tmp/FlashBankRevolutionary-flat.sol
```

Or regenerate if needed:
```bash
npx hardhat flatten contracts/FlashBankRevolutionary.sol > /tmp/FlashBankRevolutionary-flat.sol
```

### 2. Verify on Etherscan

#### Step A: Go to Verification Page
Visit: https://etherscan.io/verifyContract

#### Step B: Enter Contract Details
1. **Contract Address:** `0xBDcC71d5F73962d017756A04919FBba9d30F0795`
2. Click "Continue"

#### Step C: Select Compiler Settings
1. **Compiler Type:** Solidity (Single file)
2. **Compiler Version:** `v0.8.19+commit.7dd6d404`
3. **License Type:** `3) MIT`
4. Click "Continue"

#### Step D: Enter Contract Source Code
1. **Contract Name:** `FlashBankRevolutionary`
2. **Optimisation:** `Yes`
3. **Optimiser runs:** `200`
4. **Via-IR:** Check this box! ✅ (Very important)
5. **Solidity Contract Code:** Paste entire contents of `/tmp/FlashBankRevolutionary-flat.sol`
6. **Constructor Arguments ABI-encoded:** 
   ```
   0000000000000000000000003cd6bbf16599af7fde6f4b7c8b6fd6bea4edc191
   ```

#### Step E: Verify
1. Click "Verify and Publish"
2. Wait for verification (usually takes 10-30 seconds)
3. You should see "Successfully generated ByteCode and ABI"

### 3. Verify on Basescan

Same process but at: https://basescan.org/verifyContract

Use the **same** contract address, settings, and code.

---

## Troubleshooting

### "Bytecode does not match"

**Check:**
1. ✅ Via-IR is enabled (very important!)
2. ✅ Optimiser runs is exactly `200`
3. ✅ Compiler version is exactly `v0.8.19+commit.7dd6d404`
4. ✅ Constructor arguments are exactly as shown
5. ✅ Using the flattened contract, not the original

### "Constructor arguments invalid"

The constructor arguments MUST be:
```
0000000000000000000000003cd6bbf16599af7fde6f4b7c8b6fd6bea4edc191
```

No `0x` prefix, just the 64 characters shown.

### "Compilation failed"

Make sure you're pasting the **entire** flattened contract including all dependencies and license headers.

---

## Why Manual Verification?

- **Etherscan API V1 deprecated:** Both Etherscan and Basescan have deprecated their V1 API endpoints
- **Hardhat plugin outdated:** The `@nomicfoundation/hardhat-verify` plugin hasn't been updated for API V2 yet
- **Hardhat 3.x required:** The new API requires Hardhat 3.x, but your project uses 2.x
- **Migration complexity:** Upgrading Hardhat would require updating many dependencies

**Manual verification is the recommended approach** until the ecosystem catches up.

---

## Verification Files Location

- **Flattened Contract:** `/tmp/FlashBankRevolutionary-flat.sol`
- **Original Contract:** `contracts/FlashBankRevolutionary.sol`
- **Compilation Config:** `hardhat.config.js`

---

## After Verification

Once verified, users will be able to:
- ✅ Read the contract source code on block explorers
- ✅ Interact directly through Etherscan/Basescan
- ✅ Verify the contract is exactly as deployed
- ✅ Build additional trust in the protocol

---

## Quick Verification Checklist

For copy-paste convenience:

**Ethereum:**
- [ ] Go to https://etherscan.io/verifyContract
- [ ] Address: `0xBDcC71d5F73962d017756A04919FBba9d30F0795`
- [ ] Compiler: `v0.8.19+commit.7dd6d404`
- [ ] License: MIT
- [ ] Optimisation: Yes, 200 runs
- [ ] Via-IR: **Yes** ✅
- [ ] Paste flattened contract
- [ ] Constructor args: `0000000000000000000000003cd6bbf16599af7fde6f4b7c8b6fd6bea4edc191`
- [ ] Verify!

**Base:**
- [ ] Go to https://basescan.org/verifyContract
- [ ] Same settings as Ethereum
- [ ] Same contract code
- [ ] Verify!

---

## Time Estimate

Manual verification typically takes:
- **Reading this guide:** 2 minutes
- **Getting flattened contract:** 30 seconds
- **Submitting verification:** 2 minutes
- **Waiting for verification:** 10-30 seconds

**Total:** ~5 minutes per network

---

## Need Help?

If verification fails:
1. Double-check Via-IR is enabled
2. Verify optimiser runs = 200
3. Check compiler version is exact match
4. Ensure entire flattened contract is pasted
5. Verify constructor arguments have no `0x` prefix

The contracts are deployed and functional. Verification only adds source code transparency on block explorers.

---

**Good luck! The contracts work perfectly without verification, but verification adds transparency for users.** ✨

