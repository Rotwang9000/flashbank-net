(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(54925)}])},54925:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var a=s(85893),r=s(67294),n=s(9008),l=s.n(n),i=s(96110),o=s(4222),d=s(28058),c=s(82002),m=s(48104),u=s(60533),x=s(88168),p=s(64007),h=s(86501),b=s(46611),f=s(32089),y=s(32225),g=s(73416),N=s(71707),j=s(49664),w=s(40758),v=s(96591),T=s(71213);let E=()=>{let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(!0)},[]),e};var k=s(83454);let _={1:{name:"Ethereum",rpcUrl:k.env.NEXT_PUBLIC_MAINNET_RPC_URL||"https://cloudflare-eth.com",router:k.env.NEXT_PUBLIC_MAINNET_ROUTER_ADDRESS||"",explorer:"https://etherscan.io",color:"purple",tokens:[{key:"weth",name:"Wrapped Ether",symbol:"WETH",address:k.env.NEXT_PUBLIC_MAINNET_WETH_ADDRESS||"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",decimals:18,supportsPermit:!0}],demoBorrower:k.env.NEXT_PUBLIC_MAINNET_DEMO_BORROWER_ADDRESS||"",proofSink:k.env.NEXT_PUBLIC_MAINNET_PROOF_SINK_ADDRESS||"",demoCounter:k.env.NEXT_PUBLIC_MAINNET_DEMO_COUNTER_ADDRESS||""},8453:{name:"Base",rpcUrl:k.env.NEXT_PUBLIC_BASE_RPC_URL||"https://mainnet.base.org",router:k.env.NEXT_PUBLIC_BASE_ROUTER_ADDRESS||"",explorer:"https://basescan.org",color:"blue",tokens:[{key:"weth",name:"Wrapped Ether",symbol:"WETH",address:k.env.NEXT_PUBLIC_BASE_WETH_ADDRESS||"0x4200000000000000000000000000000000000006",decimals:18,supportsPermit:!0}],demoBorrower:k.env.NEXT_PUBLIC_BASE_DEMO_BORROWER_ADDRESS||"",proofSink:k.env.NEXT_PUBLIC_BASE_PROOF_SINK_ADDRESS||"",demoCounter:k.env.NEXT_PUBLIC_BASE_DEMO_COUNTER_ADDRESS||""},42161:{name:"Arbitrum",rpcUrl:k.env.NEXT_PUBLIC_ARBITRUM_RPC_URL||"https://arb1.arbitrum.io/rpc",router:k.env.NEXT_PUBLIC_ARBITRUM_ROUTER_ADDRESS||"",explorer:"https://arbiscan.io",color:"green",tokens:[{key:"weth",name:"Wrapped Ether",symbol:"WETH",address:k.env.NEXT_PUBLIC_ARBITRUM_WETH_ADDRESS||"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",decimals:18,supportsPermit:!0}],demoBorrower:k.env.NEXT_PUBLIC_ARBITRUM_DEMO_BORROWER_ADDRESS||"",proofSink:k.env.NEXT_PUBLIC_ARBITRUM_PROOF_SINK_ADDRESS||"",demoCounter:k.env.NEXT_PUBLIC_ARBITRUM_DEMO_COUNTER_ADDRESS||""},11155111:{name:"Sepolia",rpcUrl:k.env.NEXT_PUBLIC_SEPOLIA_RPC_URL||"https://ethereum-sepolia-rpc.publicnode.com",router:"0x9a4FbC70b30f32006A3fe834173D16b7A0e4E7D4",explorer:"https://sepolia.etherscan.io",color:"yellow",tokens:[{key:"weth",name:"Wrapped Ether",symbol:"WETH",address:"0xdd13E55209Fd76AfE204dBda4007C227904f0a81",decimals:18,supportsPermit:!1}],demoBorrower:"0xFD0a29b84533d9CEF69e63311bb766236f09a454",proofSink:"0x0cE5514Cf655ce859B1FdDb412FaFcb3Fb921169",demoCounter:"0x1E202CD9a97392f6E74F70dc29b5404A00eD8561"}},D=[{inputs:[{internalType:"address",name:"token",type:"address"},{components:[{internalType:"bool",name:"enabled",type:"bool"},{internalType:"bool",name:"supportsPermit",type:"bool"},{internalType:"uint16",name:"feeBps",type:"uint16"},{internalType:"uint256",name:"maxFlashLoan",type:"uint256"},{internalType:"address",name:"wrapper",type:"address"}],internalType:"struct FlashBankRouter.TokenConfig",name:"config",type:"tuple"}],name:"setTokenConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"limit",type:"uint256"},{internalType:"uint48",name:"expiry",type:"uint48"},{internalType:"bool",name:"paused",type:"bool"}],name:"setCommitment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"quoteFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"provider",type:"address"}],name:"getProviderInfo",outputs:[{internalType:"uint256",name:"limit",type:"uint256"},{internalType:"uint256",name:"inUse",type:"uint256"},{internalType:"uint48",name:"expiry",type:"uint48"},{internalType:"bool",name:"paused",type:"bool"},{internalType:"bool",name:"registered",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getTokenStats",outputs:[{internalType:"uint256",name:"committed",type:"uint256"},{internalType:"uint256",name:"activeProviders",type:"uint256"},{internalType:"uint16",name:"feeBps",type:"uint16"},{internalType:"uint256",name:"maxFlashLoan",type:"uint256"},{internalType:"bool",name:"supportsPermit",type:"bool"},{internalType:"uint16",name:"maxBorrowBps",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getProviders",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"}],C=[{inputs:[],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],S=[{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"runDemo",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"runDemoFail",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"}],R=[{inputs:[],name:"getStats",outputs:[{internalType:"uint256",name:"total",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"}],B=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(!e)return"0";let s="bigint"==typeof e?Number(i.dF(e)):Number(e);return s>1e20?"Unlimited":s.toFixed(t)},F=e=>e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"";function P(){let{address:e,isConnected:t}=(0,d.Tj)(),s=(0,c.x)(),n=(0,m.t)({chainId:s}),{data:k}=(0,u.p)(),{switchChain:P}=(0,x.o)(),{disconnect:A}=(0,p.q)(),U=E(),[H,W]=(0,r.useState)("weth"),[I,L]=(0,r.useState)("0"),[M,O]=(0,r.useState)(0n),[Z,X]=(0,r.useState)(!0),[q,G]=(0,r.useState)("None"),[V,Y]=(0,r.useState)(!1),[z,K]=(0,r.useState)("0"),[J,Q]=(0,r.useState)(0n),[$,ee]=(0,r.useState)("0"),[et,es]=(0,r.useState)("0"),[ea,er]=(0,r.useState)(""),[en,el]=(0,r.useState)(!0),[ei,eo]=(0,r.useState)(!1),[ed,ec]=(0,r.useState)("0.1"),[em,eu]=(0,r.useState)("0.1"),[ex,ep]=(0,r.useState)({committed:"0",providers:"0",feeBps:0}),[eh,eb]=(0,r.useState)("0"),[ef,ey]=(0,r.useState)("0.1"),[eg,eN]=(0,r.useState)(!1),[ej,ew]=(0,r.useState)(null),[ev,eT]=(0,r.useState)(null),[eE,ek]=(0,r.useState)(!1),[e_,eD]=(0,r.useState)("none"),[eC,eS]=(0,r.useState)(null),[eR,eB]=(0,r.useState)("0"),eF=_[s]||_[11155111],eP=(0,r.useMemo)(()=>eF.tokens.find(e=>e.key===H)||eF.tokens[0],[eF,H]);(0,r.useEffect)(()=>{eF.tokens.find(e=>e.key===H)||W(eF.tokens[0].key)},[eF,H]);let eA=eF.router&&(null==eP?void 0:eP.address),eU=(0,r.useCallback)(async()=>{if(!eA||!eP||!eF.router||!n){ep({committed:"0",providers:"0",feeBps:0}),eb("0");return}try{let e=await n.readContract({address:eF.router,abi:D,functionName:"getTokenStats",args:[eP.address]}),t=await n.readContract({address:eF.router,abi:D,functionName:"getProviders",args:[eP.address]}),s=0n;for(let e of t){let t=await n.readContract({address:eF.router,abi:D,functionName:"getProviderInfo",args:[eP.address,e]}),a=t[0];if(!t[3]&&a>0n){let t=await n.readContract({address:eP.address,abi:C,functionName:"balanceOf",args:[e]});s+=t<a?t:a}}ep({committed:i.dF(s),providers:e[1].toString(),feeBps:Number(e[2])});let a=await n.readContract({address:eF.router,abi:D,functionName:"quoteFee",args:[eP.address,i.fi(ef||"0")]});eb(i.dF(a))}catch(e){console.error("Failed to load pool stats",e),ep({committed:"0",providers:"0",feeBps:0}),eb("0")}},[eA,eP,eF,ef,n]),eH=(0,r.useCallback)(async()=>{if(!n||!U||!eP||!t||!e){L("Not set"),O(0n),X(!0),G("None"),Y(!1),K("0"),Q(0n),ee("0"),es("0");return}try{let t=await n.readContract({address:eP.address,abi:C,functionName:"balanceOf",args:[e]});ee(i.dF(t));let s=await n.getBalance({address:e});if(es(i.dF(s)),eA&&eF.router){let t=await n.readContract({address:eF.router,abi:D,functionName:"getProviderInfo",args:[eP.address,e]}),s=t[0],a=!!t[4];if(Y(a),a){let e=s===o.Bz;L(e?"Unlimited":i.dF(s)),O(s),X(!!t[3]),ei||(el(e),er(e?"":i.dF(s)))}else L("Not set"),O(0n),ei||(el(!0),er("")),X(!1);let r=t[2];G(r&&r>0n?new Date(1e3*Number(r)).toLocaleString():"None");let l=await n.readContract({address:eP.address,abi:C,functionName:"allowance",args:[e,eF.router]});Q(l),l===o.Bz?K("Unlimited"):0n===l?K("0"):K(i.dF(l))}else L("Not set"),O(0n),Y(!1),ei||(el(!0),er("")),X(!0),G("None"),K("0"),Q(0n)}catch(e){console.error("Failed to load account state",e)}},[U,t,e,eA,eP,eF,n]);(0,r.useEffect)(()=>{eU()},[eU]),(0,r.useEffect)(()=>{eH()},[eH]),(0,r.useEffect)(()=>{V||ei||(el(!0),er(""))},[V,ei]);let eW=(0,r.useCallback)(async()=>{if(!n||!eF.demoCounter){eB("0");return}try{let e=await n.readContract({address:eF.demoCounter,abi:R,functionName:"getStats"});eB(i.dF(e[0]))}catch(e){console.error("Failed to load demo counter",e),eB("0")}},[n,eF]);(0,r.useEffect)(()=>{eW()},[eW]);let eI=async function(t,s,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!k||!n||!e)throw Error("Wallet not ready");let{value:i,allowRevert:o}=l;try{let{request:l}=await n.simulateContract({address:t,abi:s,functionName:a,args:r,account:e,value:i});return await k.writeContract(l)}catch(n){if(o)return console.warn("Simulation reverted but allowRevert=true, sending tx anyway"),await k.writeContract({address:t,abi:s,functionName:a,args:r,account:e,value:i});throw console.error(n),n}},eL=async()=>{if(!eA){h.ZP.error("Router address not configured for this network");return}if(eP&&n)try{let e;0n===J&&await h.ZP.promise((async()=>{let e=await eI(eP.address,C,"approve",[eF.router,o.Bz]);await n.waitForTransactionReceipt({hash:e}),await eH()})(),{loading:"Step 1/2: Approving router...",success:"Approved! Now setting commitment...",error:"Approval failed"});try{e=en?o.Bz:i.fi(ea||"0")}catch(e){h.ZP.error("Enter a valid limit amount");return}await h.ZP.promise((async()=>{let t=await eI(eF.router,D,"setCommitment",[eP.address,e,0n,!1]);await n.waitForTransactionReceipt({hash:t}),await eH(),await eU(),eo(!1)})(),{loading:0n===J?"Step 2/2: Setting commitment...":"Setting commitment...",success:"Commitment active!",error:"Commitment failed"})}catch(e){}},eM=async()=>{if(!eA){h.ZP.error("Router address not configured for this network");return}if(eP&&n)try{let e=!Z;await h.ZP.promise((async()=>{let t=await eI(eF.router,D,"setCommitment",[eP.address,M,0n,e]);await n.waitForTransactionReceipt({hash:t}),await eH(),await eU(),eo(!1)})(),{loading:e?"Pausing...":"Resuming...",success:e?"Paused":"Resumed",error:"Update failed"})}catch(e){}},eO=async()=>{if(eP&&n)try{let e=i.fi(ed||"0");await h.ZP.promise((async()=>{let t=await eI(eP.address,C,"deposit",[],{value:e});await n.waitForTransactionReceipt({hash:t}),await eH()})(),{loading:"Wrapping ETH...",success:"Wrapped successfully",error:"Wrap failed"})}catch(e){}},eZ=async()=>{if(eP&&n)try{let e=i.fi(em||"0");await h.ZP.promise((async()=>{let t=await eI(eP.address,C,"withdraw",[e]);await n.waitForTransactionReceipt({hash:t}),await eH()})(),{loading:"Unwrapping WETH...",success:"Unwrapped successfully",error:"Unwrap failed"})}catch(e){}},eX=async e=>{if(ek(e),eD("none"),eS(null),!eP||!eF.demoBorrower||!eF.router||!n){h.ZP.error("Demo not configured for this network");return}try{let t;eN(!0),ew(null),eT(null),eB("0");let s=i.fi(ef||"0"),a=await n.readContract({address:eF.router,abi:D,functionName:"quoteFee",args:[eP.address,s]});e&&(eT({amount:ef,fee:i.dF(a)}),eD("blocked"),ew("pending"));let r=e?"runDemoFail":"runDemo",l=await eI(eF.demoBorrower,S,r,[s],{value:a,allowRevert:e});ew(l);try{t=await n.waitForTransactionReceipt({hash:l})}catch(e){if(!(t=await n.getTransactionReceipt({hash:l}).catch(()=>null)))throw e}if("reverted"===t.status){if(e)eT({amount:ef,fee:i.dF(a)}),eD("blocked"),eS("FlashLoanFailed (expected) – router blocked the theft attempt."),h.ZP.success("Borrow attempt blocked – funds stayed in the pool");else throw Error("Demo transaction reverted")}else eT({amount:ef,fee:i.dF(a)}),eD(e?"blocked":"success"),await eH(),await eU(),await eW(),h.ZP.success(e?"Borrow attempt executed and repaid":"Demo completed successfully!")}catch(s){let t=(null==s?void 0:s.shortMessage)||(null==s?void 0:s.message)||"Demo failed";e&&(t.includes("rejected")||t.includes("denied")||t.includes("cancelled"))?(eS("Your wallet rejected the transaction (expected - it detected the revert). See the flow above for what would have happened."),h.ZP.info("Wallet rejected transaction (expected behaviour)")):h.ZP.error(t)}finally{eN(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"FlashBank Router - WETH Liquidity"}),(0,a.jsx)("meta",{name:"description",content:"Provide WETH liquidity directly from your wallet and earn flash loan fees."}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(h.x7,{position:"top-right"}),(0,a.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 py-4 flex flex-wrap gap-4 justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"FlashBank Router"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Permit-based WETH commitments (no deposits)"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[Object.entries(_).map(e=>{let[t,r]=e;return(0,a.jsx)("button",{onClick:()=>P({chainId:Number(t)}),className:"px-3 py-1 rounded-full text-sm ".concat(Number(t)===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"),children:r.name},t)}),t&&e?(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full text-sm text-gray-700",children:[(0,a.jsx)("span",{className:"font-mono",children:F(e)}),(0,a.jsx)("button",{onClick:()=>A(),className:"text-blue-600 hover:text-blue-800 transition-colors",children:"Disconnect"})]}):(0,a.jsx)("appkit-connect-button",{})]})]})}),(0,a.jsxs)("main",{className:"container mx-auto px-6 py-8 space-y-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl shadow-lg p-6 text-white",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\uD83C\uDFE6 Welcome to FlashBank"}),(0,a.jsxs)("p",{className:"text-blue-100 text-sm",children:["The only flash loan protocol where ",(0,a.jsx)("strong",{children:"funds stay in your wallet"}),". No deposits, just approve & commit."]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)("a",{href:"/guides/lend",className:"inline-flex items-center gap-1 bg-white text-blue-600 px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-50 transition-colors",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),"Lender Guide"]}),(0,a.jsxs)("a",{href:"/guides/borrow",className:"inline-flex items-center gap-1 bg-white text-blue-600 px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-50 transition-colors",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4"}),"Borrower Guide"]}),(0,a.jsxs)("a",{href:"/security",className:"inline-flex items-center gap-1 bg-white text-blue-600 px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-50 transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),"Security Audit"]})]})]})}),eF.router&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-blue-900 mb-1",children:"\uD83D\uDCDD FlashBankRouter Contract"}),(0,a.jsx)("p",{className:"text-xs text-blue-700 font-mono break-all",children:eF.router})]}),(0,a.jsxs)("a",{href:"https://".concat(11155111===s?"sepolia.":"","etherscan.io/address/").concat(eF.router,"#code"),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors whitespace-nowrap",children:["View on Explorer",(0,a.jsx)(N.Z,{className:"h-3 w-3"})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-gray-200",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-blue-500"}),"WETH Liquidity Overview"]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total Committed"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[ex.committed," WETH"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Active Providers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:ex.providers})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Fee"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[ex.feeBps," bps"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-gray-200",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-3 mb-6",children:eF.tokens.map(e=>(0,a.jsx)("button",{onClick:()=>W(e.key),className:"px-4 py-2 rounded-lg text-sm font-medium ".concat(e.key===H?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:e.symbol},e.key))}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Wallet Balances"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["ETH: ",et]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["WETH: ",$]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Allowance: ","Unlimited"===z?"Unlimited":"".concat(z," WETH")]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Wrap Amount (ETH)"}),(0,a.jsx)("input",{value:ed,onChange:e=>ec(e.target.value),className:"w-full border rounded-lg px-3 py-2 mt-1"})]}),(0,a.jsxs)("button",{onClick:eO,className:"self-end bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"})," Wrap"]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Unwrap Amount (WETH)"}),(0,a.jsx)("input",{value:em,onChange:e=>eu(e.target.value),className:"w-full border rounded-lg px-3 py-2 mt-1"})]}),(0,a.jsxs)("button",{onClick:eZ,className:"self-end bg-gray-800 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"})," Unwrap"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Provide Liquidity"}),0n===J&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm text-yellow-800",children:"⚠️ Router not approved yet. The button below will approve and then set your commitment."})}),J>0n&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Current Limit:"," ","Unlimited"===I?"Unlimited":"Not set"===I?"Not set (set a limit to start lending)":"".concat(I," WETH")]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Status:"," ",V?Z?"⏸️ Paused":"✓ Active":"No commitment yet"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Expiry: ",q]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"unlimited-checkbox",checked:en,onChange:e=>{el(e.target.checked),eo(!0),e.target.checked&&er("")},className:"w-4 h-4 text-blue-600 rounded"}),(0,a.jsx)("label",{htmlFor:"unlimited-checkbox",className:"text-sm text-gray-700 cursor-pointer",children:"Unlimited commitment"})]}),(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Commitment Limit (WETH)"}),(0,a.jsx)("input",{value:ea,onChange:e=>{er(e.target.value),eo(!0),el(!1)},placeholder:en?"Unlimited":"e.g. 10.0",disabled:en,className:"w-full border rounded-lg px-3 py-2 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed"}),0n===J||ei||!V?(0,a.jsx)("button",{onClick:eL,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold",children:0n===J?"Approve & Set Commitment":V?"Update Commitment":"Set Commitment"}):(0,a.jsx)("button",{onClick:eM,className:"w-full py-3 rounded-lg font-semibold flex items-center justify-center gap-2 ".concat(Z?"bg-green-600 text-white":"bg-yellow-500 text-white"),children:Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,{className:"h-5 w-5"})," Resume"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{className:"h-5 w-5"})," Pause"]})})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCA1 How FlashBank Works"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"For Lenders (You earn fees)"}),(0,a.jsxs)("ol",{className:"space-y-2 text-sm text-gray-700",children:[(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:"1."}),(0,a.jsx)("span",{children:"Wrap some ETH to WETH (or use existing WETH)"})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:"2."}),(0,a.jsx)("span",{children:"Approve the FlashBankRouter to access your WETH"})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:"3."}),(0,a.jsxs)("span",{children:["Set a commitment limit (or unlimited) - ",(0,a.jsx)("strong",{children:"WETH stays in your wallet!"})]})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:"4."}),(0,a.jsx)("span",{children:"Earn fees every time borrowers use your liquidity"})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:"5."}),(0,a.jsx)("span",{children:"Pause/unpause or change limits anytime - instant effect"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"For Borrowers (MEV/Arb bots)"}),(0,a.jsxs)("ol",{className:"space-y-2 text-sm text-gray-700",children:[(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-purple-600",children:"1."}),(0,a.jsxs)("span",{children:["Implement the ",(0,a.jsx)("code",{className:"bg-gray-100 px-1 rounded text-xs",children:"IFlashLoanReceiver"})," interface"]})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-purple-600",children:"2."}),(0,a.jsxs)("span",{children:["Call ",(0,a.jsx)("code",{className:"bg-gray-100 px-1 rounded text-xs",children:"flashLoan(token, amount, toNative, data)"})]})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-purple-600",children:"3."}),(0,a.jsx)("span",{children:"Router pulls WETH from providers (all in one tx)"})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-purple-600",children:"4."}),(0,a.jsx)("span",{children:"Your contract receives WETH or native ETH"})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-purple-600",children:"5."}),(0,a.jsx)("span",{children:"Execute your arbitrage/MEV logic"})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-purple-600",children:"6."}),(0,a.jsx)("span",{children:"Repay principal + fee or entire tx reverts"})]})]})]})]}),(0,a.jsx)("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,a.jsx)("strong",{children:"\uD83D\uDD10 Key Difference:"})," Traditional flash loan protocols require you to ",(0,a.jsx)("em",{children:"deposit"})," your funds into their contract. FlashBank lets you ",(0,a.jsx)("strong",{children:"keep WETH in your own wallet"})," and just approve the router. You maintain full custody until the moment a loan is executed."]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"h-5 w-5 text-purple-500"}),"Demo Flash Loan"]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-green-900 mb-2",children:"✓ Success Demo"}),(0,a.jsx)("p",{className:"text-sm text-green-800",children:"Borrows WETH from the pool → unwraps to ETH → passes through counter (proving you used others' funds) → proves funds on-chain → repays router. Transaction succeeds."})]}),(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-red-900 mb-2",children:"✗ Fail Demo"}),(0,a.jsxs)("p",{className:"text-sm text-red-800 mb-2",children:["Borrows WETH → unwraps → passes through counter → attempts to keep funds by sending to proof sink. Router detects missing repayment and ",(0,a.jsx)("strong",{children:"reverts the entire transaction"}),". Funds are safe."]}),(0,a.jsxs)("p",{className:"text-xs text-red-700 italic",children:["⚠️ Note: Most wallets will reject this transaction before sending because they simulate it and detect the revert. If your wallet blocks it, that's expected! ",(0,a.jsx)("a",{href:"https://sepolia.etherscan.io/tx/0xd721f1d04f0c2662542c8c3fddd37ee28020606000ea22e2b356ba22299301dd",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"See example test transaction"}),"."]})]})]}),eF.demoCounter&&(0,a.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-purple-900",children:"Demo Counter"}),(0,a.jsx)("p",{className:"text-xs text-purple-700",children:"Total ETH that has passed through the counter"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:eR}),(0,a.jsx)("p",{className:"text-xs text-purple-700",children:"ETH"})]})]})}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Demo Requirements:"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-blue-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[Number(ex.committed)>=Number(ef)?"✓":"✗",(0,a.jsxs)("span",{children:["Pool has ≥ ",ef," WETH committed (current: ",B(ex.committed,4)," WETH)"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[Number(et)>=Number(eh)?"✓":"✗",(0,a.jsxs)("span",{children:["You have ≥ ",eh," ETH for the fee"]})]})]}),(0,a.jsx)("p",{className:"text-xs text-blue-700 mt-2 italic",children:"Note: The demo borrows from the pool, not your personal commitment"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Amount (ETH)"}),(0,a.jsx)("input",{value:ef,onChange:e=>ey(e.target.value),className:"w-full border rounded-lg px-3 py-2 mt-1"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Estimated Fee: ",eh," ETH"]})]}),(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>eX(!1),disabled:eg||Number(ex.committed)<Number(ef)||Number(et)<Number(eh),className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",title:Number(ex.committed)<Number(ef)||Number(et)<Number(eh)?"Check requirements above":"Borrow, prove funds, and repay successfully",children:eg&&!eE?"Running...":"Run Demo (Success)"}),(0,a.jsx)("button",{onClick:()=>eX(!0),disabled:eg||Number(ex.committed)<Number(ef)||Number(et)<Number(eh),className:"flex-1 bg-red-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",title:Number(ex.committed)<Number(ef)||Number(et)<Number(eh)?"Check requirements above":"Attempt to steal funds - transaction will revert",children:eg&&eE?"Running...":"Run Demo (Fail)"})]})]}),(ej||"blocked"===e_)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[ej&&"pending"!==ej&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Tx:"," ",(0,a.jsxs)("a",{href:"".concat(eF.explorer,"/tx/").concat(ej),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:[ej.slice(0,10),"...",ej.slice(-8)]})]}),ev&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Amount ",ev.amount," ETH \xb7 Fee ",ev.fee," ETH"]})]}),"pending"===ej&&"blocked"===e_&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-yellow-800 font-semibold mb-1",children:"⚠️ Wallet Simulation Detected Revert"}),(0,a.jsx)("p",{className:"text-xs text-yellow-700",children:"Most wallets will reject this transaction before sending. If yours does, that's working as intended! The flow below shows what would happen if the transaction were sent."}),ev&&(0,a.jsxs)("p",{className:"text-xs text-yellow-700 mt-2",children:["Attempted: ",ev.amount," ETH \xb7 Fee: ",ev.fee," ETH"]})]}),(0,a.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Transaction Flow:"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"}),(0,a.jsx)("a",{href:"".concat(eF.explorer,"/address/").concat(eF.router),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"Pool providers' WETH"}),(0,a.jsx)("span",{className:"text-gray-400",children:"→"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE6"}),(0,a.jsx)("a",{href:"".concat(eF.explorer,"/address/").concat(eF.router),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"FlashBank Router (unwrap)"}),(0,a.jsx)("span",{className:"text-gray-400",children:"→"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD16"}),(0,a.jsx)("a",{href:"".concat(eF.explorer,"/address/").concat(eF.demoBorrower),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"Demo Borrower (receives ETH)"}),(0,a.jsx)("span",{className:"text-gray-400",children:"→"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD22"}),(0,a.jsxs)("a",{href:"".concat(eF.explorer,"/address/").concat(eF.demoCounter),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:["Counter (proves you used ",null==ev?void 0:ev.amount," ETH)"]}),(0,a.jsx)("span",{className:"text-gray-400",children:"→"})]}),"success"===e_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"✅"}),(0,a.jsx)("a",{href:"".concat(eF.explorer,"/address/").concat(eF.proofSink),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"Proof (refunds ETH)"}),(0,a.jsx)("span",{className:"text-gray-400",children:"→"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB8"}),(0,a.jsx)("span",{className:"text-green-600 font-semibold flex-1",children:"Repaid to Router + Fee"}),(0,a.jsx)("span",{className:"text-green-600",children:"✓"})]})]}),"blocked"===e_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDEAB"}),(0,a.jsx)("a",{href:"".concat(eF.explorer,"/address/").concat(eF.proofSink),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline flex-1",children:"Proof (keeps ETH - theft attempt)"}),(0,a.jsx)("span",{className:"text-red-600",children:"✗"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-red-50 border border-red-200 rounded p-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"⛔"}),(0,a.jsx)("span",{className:"text-red-600 font-semibold flex-1",children:"Router detected missing repayment → REVERT"})]}),(0,a.jsx)("p",{className:"text-xs text-red-700 italic mt-2",children:"All state changes rolled back. Providers' WETH never left their wallets."})]}),"none"===e_&&(0,a.jsx)("p",{className:"text-xs text-gray-500 italic",children:"Run a demo to visualise the full flow."})]})]})]}),eC&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-2",children:eC})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Guide"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[(0,a.jsx)("li",{children:"Wrap the ETH amount you wish to make available (WETH stays in your wallet)."}),(0,a.jsx)("li",{children:"Approve the FlashBank Router once."}),(0,a.jsx)("li",{children:"Set your commitment limit and optional expiry. Pause/resume at any time."}),(0,a.jsx)("li",{children:"Earn 0.02% (configurable) each time your WETH is pulled into a flash loan."}),(0,a.jsx)("li",{children:"Use the demo to verify behaviour on Sepolia before moving to production chains."})]})]})]}),(0,a.jsx)("footer",{className:"bg-white border-t border-gray-200 py-8 mt-12",children:(0,a.jsxs)("div",{className:"container mx-auto px-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"\uD83D\uDCDA Documentation"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/guides/lend",className:"text-blue-600 hover:text-blue-800",children:"Lender Guide"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/guides/borrow",className:"text-blue-600 hover:text-blue-800",children:"Borrower Guide"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/security",className:"text-blue-600 hover:text-blue-800",children:"Security Audit"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"\uD83D\uDD17 Smart Contracts"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[eF.router&&(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"".concat(eF.explorer,"/address/").concat(eF.router,"#code"),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 inline-flex items-center gap-1",children:["FlashBankRouter",(0,a.jsx)(N.Z,{className:"h-3 w-3"})]})}),eP&&(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"".concat(eF.explorer,"/address/").concat(eP.address,"#code"),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 inline-flex items-center gap-1",children:["WETH Token",(0,a.jsx)(N.Z,{className:"h-3 w-3"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"https://github.com/your-repo/flashbank-net",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 inline-flex items-center gap-1",children:["View on GitHub",(0,a.jsx)(N.Z,{className:"h-3 w-3"})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"ℹ️ About"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"FlashBank is the first flash loan protocol where liquidity providers maintain full custody of their funds until the moment a loan executes."}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"⚠️ Soft launch on Sepolia. Use at your own risk."})]})]}),(0,a.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center text-sm text-gray-500",children:(0,a.jsx)("p",{children:"Built with ❤️ for the Ethereum community \xb7 No deposits, no custody, no nonsense"})})]})})]})]})}}},function(e){e.O(0,[9326,4990,4172,2888,9774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);